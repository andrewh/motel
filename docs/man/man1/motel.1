.TH MOTEL 1 "2026-02-20" "Motel" "User Commands"
.SH NAME
motel \- topology\-driven synthetic OTLP trace generator
.SH SYNOPSIS
.B motel validate
\fIconfig.yaml\fR
.PP
.B motel run
[\fIflags\fR]
\fIconfig.yaml\fR
.PP
.B motel import
[\fB\-\-format\fR \fIauto\fR|\fIstdouttrace\fR|\fIotlp\fR]
[\fB\-\-min\-traces\fR \fIN\fR]
[\fIfile\fR]
.PP
.B motel version
.SH DESCRIPTION
.B motel
generates realistic distributed traces from a YAML topology definition. No
server or live services are required \(em describe the behaviour of your system
and motel derives telemetry from it.
.PP
The topology DSL has three concepts: \fBservices\fR contain \fBoperations\fR
which call other operations, and \fBscenarios\fR apply time\-windowed overrides.
The engine walks the topology tree once per trace, sampling durations and
errors from the configured distributions.
.SH COMMANDS
.SS validate
Check a topology file for errors. Prints a summary on success or a precise
error message on failure.
.SS run
Generate synthetic signals from a topology.
.TP
.B \-\-duration
\fIduration\fR
Override simulation duration (default: from config, or 1m).
.TP
.B \-\-endpoint
\fIhost:port\fR
OTLP endpoint (e.g. localhost:4318). Required unless \fB\-\-stdout\fR is set.
.TP
.B \-\-protocol
\fIhttp/protobuf\fR|\fIgrpc\fR
OTLP protocol (default: http/protobuf).
.TP
.B \-\-signals
\fIsignals\fR
Comma\-separated signals to emit: traces, metrics, logs (default: traces).
.TP
.B \-\-slow\-threshold
\fIduration\fR
Spans exceeding this duration emit a slow\-span log record (default: 1s).
Only has an effect when \fBlogs\fR is included in \fB\-\-signals\fR.
.TP
.B \-\-max\-spans\-per\-trace
\fIN\fR
Safety limit for deep topologies (default: 10000).
.TP
.B \-\-stdout
Emit signals to stdout as JSON instead of sending to an endpoint.
.SS import
Infer a topology from existing trace data. Reads from \fIfile\fR or stdin if
no file is given. Output is a YAML topology written to stdout.
.TP
.B \-\-format
\fIauto\fR|\fIstdouttrace\fR|\fIotlp\fR
Input format (default: auto). The auto detector examines the first line.
.TP
.B \-\-min\-traces
\fIN\fR
Minimum traces for statistical accuracy; warns if fewer (default: 1).
.SS version
Print the build version and exit.
.SH OUTPUT FORMAT
When \fB\-\-stdout\fR is used with \fBrun\fR:
.IP \(bu 2
\fBstdout\fR \(em one JSON object per line (stdouttrace format), one span per line.
.IP \(bu 2
\fBstderr\fR \(em a single JSON statistics object on the final line, containing
trace count, span count, error rate, and other run metrics.
.PP
This split allows capturing spans and stats separately:
.PP
.RS
.nf
motel run \-\-stdout config.yaml > spans.jsonl 2> stats.json
.fi
.RE
.PP
The stdout format is the same format accepted by \fBmotel import\fR.
.SH TOPOLOGY DSL
The topology file requires \fBversion: 1\fR and defines services, operations,
traffic, and optional scenarios. See the full DSL reference in the project
README.
.SH EXAMPLES
Validate a topology:
.PP
.RS
.nf
motel validate docs/examples/basic\-topology.yaml
.fi
.RE
.PP
Generate traces to stdout for 5 seconds:
.PP
.RS
.nf
motel run \-\-stdout \-\-duration 5s docs/examples/basic\-topology.yaml
.fi
.RE
.PP
Send traces to a collector:
.PP
.RS
.nf
motel run \-\-endpoint localhost:4318 \-\-duration 30s topology.yaml
.fi
.RE
.PP
Import a topology from trace data:
.PP
.RS
.nf
motel import traces.jsonl > inferred\-topology.yaml
.fi
.RE
.SH FILES
.TP
.I docs/examples/*.yaml
Example topology files included with the project.
