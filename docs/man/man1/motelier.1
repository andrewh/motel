.TH MOTELIER 1 "2025-12-14" "Motel" "User Commands"
.SH NAME
motelier \- CLI client for the Motel API
.SH SYNOPSIS
.B motelier
[\fB\-\-config\fR \fIpath\fR]
[\fB\-\-endpoint\fR \fIurl\fR]
[\fB\-\-api\-key\fR \fItoken\fR]
[\fB\-\-format\fR \fBtable\fR|\fBjson\fR|\fByaml\fR]
[\fB\-\-env\fR \fIname\fR]
[\fB\-\-quiet\fR]
\fIcommand\fR
[\fIargs...\fR]
.SH DESCRIPTION
.B motelier
is a command\-line client for interacting with a running
.BR motel (1)
server. It manages plans and jobs, runs performance tests, and provides
interactive guides for common workflows.
.PP
Most subcommands talk to the Motel HTTP API. Use
.B \-\-format
and
.B \-\-quiet
to produce machine\-friendly output for automation.
.SH GLOBAL OPTIONS
.TP
.B \-\-config
\fIpath\fR
Config file path (default:
.BR ~/.motel/config.yaml ).
.TP
.B \-\-endpoint
\fIurl\fR
Motel API endpoint (default:
.BR http://localhost:8080 ).
.TP
.B \-\-api\-key
\fItoken\fR
API token for authentication. This can also be set via
.BR BEACON_API_KEY .
.TP
.B \-f ", " \-\-format
\fBtable\fR|\fBjson\fR|\fByaml\fR
Output format (default:
.BR table ).
.TP
.B \-e ", " \-\-env
\fIname\fR
Named environment from configuration (for example,
.BR local ", " staging ", " production ).
.TP
.B \-q ", " \-\-quiet
Suppress headers and extra output. Recommended for scripting with
.B \-\-format json
or
.BR yaml .
.SH COMMANDS
.TP
.B status
Check connectivity and server health.
.TP
.B version
Print client version (and sometimes server version information, if available).
.TP
.B handlers
List or inspect available plan step handlers.
.TP
.B plans
Plan management (list, import/export, validate, batch operations).
.TP
.B plan
Single\-plan operations (get, create, update, delete, execute).
.TP
.B jobs
Job management (list).
.TP
.B job
Single\-job operations (get, create, execute, cancel, delete, wait; plus batch
helpers).
.TP
.B perf
Performance testing (list/get/create/start) and timeline function discovery.
.TP
.B watch
Watch jobs or performance tests in real time.
.TP
.B auth
Authentication helpers (login/logout/whoami; user/token management when
authorized).
.TP
.B backup
Create and restore backups (use
.B motelier backup \-\-help
for options).
.TP
.B analytics
Plan statistics and analytics.
.TP
.B profiles
Generate and export load profiles and patterns.
.TP
.B setup
Bootstrap configuration (init/endpoint/test).
.TP
.B guide
Interactive step\-by\-step guides (setup/plan/perf).
.TP
.B template
Work with templates (validate/preview/execute/init).
.TP
.B completion
Generate shell completion scripts (provided by Cobra).
.PP
For detailed flags and subcommands, use:
.PP
.nf
motelier \fIcommand\fR \-\-help
.fi
.SH CONFIGURATION
By default,
.B motelier
loads
.B ~/.motel/config.yaml
and creates it with sensible defaults if missing.
.PP
Environment variables prefixed with
.B BEACON_
override configuration values. Common overrides include:
.B BEACON_ENDPOINT
and
.BR BEACON_API_KEY .
.SH FILES
.TP
.B ~/.motel/config.yaml
Default configuration file.
.SH ENVIRONMENT
.TP
.B BEACON_ENDPOINT
Override API endpoint.
.TP
.B BEACON_API_KEY
Override API key.
.TP
.B BEACON_FORMAT
Override output format.
.SH EXAMPLES
Check server status:
.PP
.nf
motelier status
.fi
.PP
Machine\-readable status for scripts:
.PP
.nf
motelier status \-f json \-q
.fi
.PP
Create a plan from a JSON file, then execute it:
.PP
.nf
motelier plan create \-\-file plan.json
PLAN_ID=$(motelier plans list \-f json \-q | jq \-r '.[0].id')
motelier plan execute "$PLAN_ID" \-\-duration 60s \-\-rate 10/s
.fi
.PP
Create and run a job:
.PP
.nf
motelier job create \-\-plan\-id "$PLAN_ID" \-\-duration 30s \-\-rate 5/s
JOB_ID=$(motelier jobs list \-f json \-q | jq \-r '.[0].id')
motelier job execute "$JOB_ID"
motelier job wait "$JOB_ID"
.fi
.PP
Set endpoint and API key in config:
.PP
.nf
motelier config set endpoint http://localhost:8080
motelier config set api_key motel_...
.fi
.PP
Use an environment profile from config:
.PP
.nf
motelier status \-\-env production
.fi
.PP
Run an interactive workflow:
.PP
.nf
motelier guide setup
motelier guide plan
motelier guide perf
.fi
.PP
Install shell completion (example for zsh):
.PP
.nf
motelier completion zsh > "${fpath[1]}/_motelier"
.fi
.SH EXIT STATUS
.TP
.B 0
Success.
.TP
.B 1
Command failure (connection error, validation error, API error, or unexpected
response).
.SH SEE ALSO
.BR motel (1)
.PP
Run
.B motelier \-\-help
and
.B motelier \fIcommand\fR \-\-help
for a complete, version\-specific list of commands and flags.
